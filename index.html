<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>买条街APP下载</title>
    <script src="./index.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .box {
            width: 7.5rem;
            height: 13.34rem;
            overflow: hidden;
            background: url('./img/bj.png') no-repeat;
            background-size: 100% 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .box_min {
            width: 100%;
            margin-top: 2.93rem;
        }

        img {
            display: block;
        }

        .box_log {
            width: 3.42rem;
            height: 3.42rem;
            margin: 0 auto;
        }

        .box_t {
            width: 4.18rem;
            height: .53rem;
            margin: 0 auto;

        }

        .box_btn {
            width: 3.94rem;
            height: 1rem;
            font-size: .42rem;
            color: #FF4603;
            background: url('./img/2.png') no-repeat;
            background-size: contain;
            background-position-y: .06rem;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 4.24rem;
            /* margin-bottom: 1.24rem; */
        }

        .mc {
            display: none;
            width: 100%;
            height: 100%;
            position:absolute;
            top: 0;
            left: 0;
            background: url('./img/mask.57fcc0bb.png') no-repeat center top;
            background-color: rgba(0, 0, 0, .7);
            background-size: 6.41rem 3.71rem;
        }

    </style>
</head>

<body>
    <div class="box">
        <div class="box_min">
            <img class="box_log" src="./img/logo.png" alt="">
            <img class="box_t" src="./img/zb.png" alt="">
        </div>
        <div class="box_btn" id="openApp">立即下载APP</div>
    </div>
    <div id="mc" class="mc"></div>
</body>

<script>
    
    document.getElementById('mc').onclick = function(e) {
        this.style.display = 'none'

    }


    document.getElementById('openApp').onclick = function (e) {
        //判断浏览器 (微信还是普通)
        var u = navigator.userAgent;
        if (/MicroMessenger/gi.test(u)) {
            document.getElementById("mc").style.display = 'block';
            // alert('点击右上角选择【在浏览器中】打开下载~~');
            return;
        }

        var d = new Date();
        var t0 = d.getTime();
        if (u.indexOf('Android') > -1 || u.indexOf('Linux') > -1) {
            //Android
            // if(openApp('RenWaiRenApp.Merchant.AppStore://://startapp')){
            //  openApp('RenWaiRenApp.Merchant.AppStore://://startapp');
            // }else{
            //     //由于打开需要1～2秒，利用这个时间差来处理－－打开app后，返回h5页面会出现页面变成app下载页面，影响用户体验
            // }
            window.location.href = ''
            var delay = setInterval(function () {
                var d = new Date();
                var t1 = d.getTime();
                if (t1 - t0 < 3000 && t1 - t0 > 2000) {
                    alert('请下载APP');
                    window.location.href = "app下载地址";
                }
                if (t1 - t0 >= 3000) {
                    clearInterval(delay);
                }
            }, 600);
        } else if (u.indexOf('iPhone') > -1) {

            window.location.href = 'RenWaiRenApp.Merchant.AppStore://'

            var delay = setInterval(function () {
                var d = new Date();
                var t1 = d.getTime();
                if (t1 - t0 < 3000 && t1 - t0 > 2000) {
                    window.location.href =
                        "https://apps.apple.com/cn/app/%E4%B9%B0%E6%9D%A1%E8%A1%97%E5%95%86%E5%AE%B6%E7%89%88/id1484441009";
                }
                if (t1 - t0 >= 3000) {
                    clearInterval(delay);
                }
            }, 100);
        }
    }
</script>

</html>